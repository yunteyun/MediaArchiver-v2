右サイドパネル 実装方針メモ（v1）
目的

選択中ファイルの詳細情報を常時表示できる右サイドパネルを実装する。

グリッド＝探索
右パネル＝整理・確認
Lightbox＝鑑賞

という三層構造を明確化する。

1. 表示モード設計
モードは2種類
① 常時表示モード（デフォルト）

右側に固定表示

レイアウトは2カラム構造

グリッド幅は縮小

② 非表示モード

パネルを閉じる

グリッドをフル幅表示

※将来的にトグルボタンで切替

2. 幅設計（ドラッグ不可）

ドラッグリサイズは実装しない。

理由：

レイアウト崩れリスク

仮想スクロールとの干渉

UIテスト工数増大

幅は固定2段階

normal: 360px

wide: 480px

トグル切替式（将来）

3. 表示トリガー

ファイル選択時のみ表示更新

hoverでは変更しない

selectedFile依存で描画

4. パネル内部構成（上から順）
① プレビューエリア

高さ固定（約300px）

背景黒

中央寄せ

アスペクト比維持

動画の場合

短い動画 → 通常再生

長い動画 → セグメント巡回プレビュー

muted固定

controlsなし

設定で自動再生ON/OFF可能

クリックでLightboxへ遷移。

② 基本情報エリア

表示項目：

ファイル名

解像度

再生時間

サイズ

作成日

テキストは折返し対応。

③ タグ表示エリア

既存タグを一覧表示

カラー表示

折り返しレイアウト

④ タグ編集導線

右パネル内に直接フル編集はしない。

方式：

「編集」ボタン → モーダル開く

または小型ポップオーバー

理由：
右パネルは閲覧中心にする。

5. パフォーマンス制約

同時再生は常に1つ

グリッドホバープレビューと排他制御

useEffect cleanup徹底

preload="metadata"

6. 状態管理

必要な状態：

isRightPanelOpen

rightPanelWidthMode ("normal" | "wide")

autoPreviewEnabled

selectedFile

7. 今回の実装スコープ

v1では以下まで実装：

パネルレイアウト

プレビュー表示

基本情報表示

タグ表示（編集はモーダル起動まで）

リサイズ切替や高度なアニメーションは後回し。

まとめ

右パネルは「動くビューア」ではなく
安定した情報整理パネルとして設計する。

レイアウトは固定幅

高さは安定

表示は選択ベース

役割分離を徹底

右パネル動画プレビュー 実装方針メモ
目的

右サイドパネルに表示する動画プレビューを、
縦横どちらの動画でもUIを崩さず自然に表示できるようにする。

基本方針

プレビュー領域の高さは固定

動画はアスペクト比を自動維持

UI全体のレイアウトは変動させない

レイアウト設計
プレビューコンテナ

width: 100%

height: 約300px（暫定値）

background: 黒系

overflow: hidden

display: flex

align-items: center

justify-content: center

※高さは実使用後に微調整予定

動画表示ルール
video 要素

max-width: 100%

max-height: 100%

object-fit: contain

preload: metadata

muted: true（右パネルでは音なし）

controls: false

表示仕様
横動画

→ 横いっぱいに表示（上下に黒帯が出る場合あり）

縦動画

→ 中央に縦長表示（左右に黒帯）

超横長 / 超縦長

→ コンテナ内に収まる範囲で等比表示

やらないこと

16:9固定化

正方形固定化

動画サイズに応じたコンテナ高さ変更

理由：
右パネルは「安定性」が最重要。
高さ変動はUXを崩すため採用しない。

将来的拡張（今は必須ではない）

動画読み込み後に：

video.videoWidth / video.videoHeight

を取得して内部保持しておくと、
将来的にレイアウト最適化やメディア分析に活用可能。

結論

プレビュー領域は固定高さ（約300px）

アスペクト比は自動維持

UIの安定性を優先