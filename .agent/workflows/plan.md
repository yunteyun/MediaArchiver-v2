---
description: 実装計画を立案し、実装モデルへの引き継ぎ指示を出力する
---

# 実装計画立案ワークフロー

機能の設計・実装計画を立案する際は、以下の手順に従ってください。

## 1. 要件の整理
- ユーザーの要求を明確化
- 関連する既存コードの調査
- 影響範囲の特定

## 2. 設計判断（必要に応じて）
重要な設計判断がある場合は、ADRを作成：
- `.agent/decisions/XXX-判断名.md`

## 3. 実装計画書の作成

**テンプレートを使用してください**: `.agent/templates/implementation_plan_template.md`

`implementation_plan.md` をartifactとして作成し、以下を含める：

### 必須項目
- **概要**: 対象フェーズ、対象機能、目的
- **前提条件**: AGENT.md 完全準拠の宣言
- **実装スコープ**: やること/やらないことの明確化
- **UI仕様**: 対象画面、操作フロー、UI制約
- **状態管理**: 使用するstate、禁止事項
- **非同期処理/IPC/FS**: 使用有無と制約
- **影響範囲**: 変更されるファイル、変更されないもの
- **リスクと対策**: 想定リスク、回避策
- **実装停止条件**: AGENT.md準拠の停止条件
- **AI作業分担**: Sonnet/Geminiの役割分担
- **完了条件**: 検証方法

> [!IMPORTANT]
> **AGENT.md に準拠しない計画は却下されます。**  
> テンプレートの「前提条件」「UI制約」「禁止事項」を必ず記載してください。

## 4. 引き継ぎ指示の出力（必須）
計画書のレビュー依頼時に、以下のテンプレートも一緒に出力：

---

### 📋 実装モデルへの引き継ぎ指示

```
## 実装依頼

### 事前確認（必須）
1. `/refresh` ワークフローを実行して現在の状態を把握してください
2. `.agent/SESSION.md` で直前の作業内容を確認
3. 実装計画書 `implementation_plan.md` を読んでください

### 今回の実装タスク
[ここに具体的なタスクを記載]

### 注意点
- 設計判断は `.agent/decisions/` のADRに従う
- CONVENTIONS.md のコーディング規約を遵守
- 不明点があれば勝手に判断せず質問してください

### 完了時の報告（必須）
実装完了後、以下を報告してください：
1. 実装した内容の概要
2. 計画からの変更点（あれば）
3. 発見した問題・懸念点
4. 動作確認結果（npm run dev で起動確認など）
5. 更新したドキュメント：
   - `.agent/SESSION.md`
   - `CHANGELOG.md`
```

---

## 5. SESSION.md の更新
計画立案後、`.agent/SESSION.md` の Next Steps を更新

---

## 6. 実装完了後の精査ガイドライン

### 精査あり（推奨）
- Phaseの切り替わり時（Phase 1→2など）
- DB設計、コア機能、複雑なロジック

### 精査なし（軽微な変更時）
- UIの微調整
- ドキュメント更新
- 明らかなバグ修正
- Phase内の小タスク
