# Roadmap

MediaArchiver v2 の開発ロードマップです。
各 Phase の詳細な変更内容は [CHANGELOG.md](CHANGELOG.md) を参照してください。

---

## ✅ 完了済み Phase 一覧

| Phase | 名称 | 主な内容 | 完了時期 |
|-------|------|----------|----------|
| 0 | 再構築準備 | v1 問題分析、方針決定 | 2026-01 |
| 1 | プロジェクト基盤構築 | Vite + Electron + TS、Zustand、SQLite、IPC | 2026-01 |
| 2 | コア機能実装 | スキャン、ファイル操作、UI 連携、サムネイル生成 | 2026-01 |
| 3 | UI 機能拡張 | サイドバー、ソート、LightBox、コンテキストメニュー | 2026-01 |
| 4 | アーカイブ対応 | 書庫ファイル処理、書庫内プレビュー | 2026-01 |
| 5 | 機能拡張 | タグ管理、フィルタリング、検索、設定画面 | 2026-01 |
| 6 | プロファイル | DB 分割方式、ホバープレビュー | 2026-02 |
| 7 | ブラッシュアップ | キーボードショートカット、パフォーマンス最適化 | 2026-02 |
| 8 | データ整合性強化 | 自動削除、トランザクション、ログシステム | 2026-02 |
| 9 | コア機能拡張 | 音声対応、重複検出、全ファイルビュー、メモ | 2026-02 |
| 10 | DB 基盤強化 | マイグレーションシステム | 2026-02 |
| 11 | 統計・ログ | 円グラフ、棒グラフ、アクティビティログ | 2026-02 |
| 12 | UI/UX 改善 | トースト、カスタムプロトコル、タグ拡張、削除改善 他 | 2026-02 |
| 13 | FileCard 基礎設計 | `isAnimated`、レイアウト刷新、デザイントークン | 2026-02 |
| 14 | 表示モードシステム | Compact/Standard 切替、タグポップオーバー | 2026-02 |
| 15 | バッジ修正 & UI 改善 | アニメーションバッジ、タグ視認性、ファイルサイズ修正 | 2026-02 |
| 16 | FileCard インタラクション修正 | クリック挙動改善、複数選択修復 | 2026-02 |
| 17 | アクセストラッキング | アクセス回数カウント、直近アクセス、ソート機能 | 2026-02 |
| 18-A | 外部アプリ起動カウント | 起動回数追跡、DB保存、FileCard表示 | 2026-02 |

---

## 🚧 進行中 (In Progress)

(なし)

---

## 📋 予定 (Planned)

### Phase 18-B: 外部アプリ連携UX強化 🔗
**優先度**: 中

- [ ] 外部アプリ設定機能
  - ファイルタイプごとにデフォルト外部アプリを設定
  - 設定画面に外部アプリ設定タブを追加
- [ ] フォールバック機能、トースト通知
- [ ] Phase 18-C: セキュリティ強化（realpath, X_OK）、シンボリックリンク対応

---




---

### 追加表示モード（Phase 14 拡張）🎨
**目的**: 異なるコンテンツタイプに最適化された表示モード
**前提**: Phase 14 MVP の動作確認とユーザーフィードバック

- [ ] 漫画モード — 2:3 縦長サムネイル、イラスト閲覧最適化
- [ ] 動画モード — 16:9 横長サムネイル、再生時間強調
- [ ] WhiteBrowser 風モード — 横長レイアウト、情報密度高
  - 参考: [file_card_表示設計に関する将来要望まとめ.md](file_card_表示設計に関する将来要望まとめ.md)

---

### Phase 12 残タスク ⏸️
- [ ] 12-12: サムネイルアスペクト比対応 **保留**
  - 固定高さ維持が必要（TanStack Virtual 要件）
  - 表示モード実装時に再検討
- [ ] 12-13: サムネイル自動パラパラモード **保留**
  - スクラブモードとの排他制御が必要

---

## 🔮 将来構想 (Backlog)

> [!NOTE]
> 実装前に既存アーキテクチャへの影響を確認し、設計レビューを行うこと。

### 技術改善
- **ffmpeg Worker/Utility Process 化** — コイル鳴き完全解決（現状 `-threads 1` で軽減済み）
- **スキャンパフォーマンス改善** — バックグラウンドスキャン、プログレッシブスキャン

### 機能拡張
- テーマカスタマイズ（CSS 変数ベース、プリセットテーマ）
- スマートプレイリスト（条件ベース動的リスト）
- 自動整理（ルールベースのファイル移動・リネーム）
- AI 活用（自動タグ付け、類似画像検索）
- ファイル名一括リネーム
- エクスポート機能（HTML/CSV）
- プラグイン機構
- クラウド同期

### プレビュー機能
- 動画プレビューの再生速度調整（0.5x〜2x）
- 画像比較モード（2 枚並べ表示）

### パフォーマンス改善
- **グループ表示モードの描画最適化**
  - 仮想スクロールの導入検討
  - グループの遅延レンダリング
  - メモ化の最適化

### タグ表示の追加改善
- **タグカテゴリの表示優先順位付け強化**
  - 現状: `sortOrder` で基本的な優先順位付けは実装済み
  - カテゴリ単位でのグループ化表示
  - 各カテゴリから均等に表示（バランス調整）
  - ドラッグ&ドロップでの sortOrder 編集

---

## 🔥 過去の緊急修正

> [!NOTE]
> 不具合修正は**一つずつ個別に取り組む**方針。修正→検証→コミットのサイクルを実施。

- [x] Lightbox 表示問題（画面はみ出し）— 2026-02-06
- [x] 書庫内音声の音量設定保存 — 2026-02-06
- [x] 書庫内複数フォルダ対応（既に実装済み）

> 将来検討: 動画音量と音声音量の独立化
