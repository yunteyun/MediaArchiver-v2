タグカテゴリと評価軸の棲み分け設計メモ
🎯 背景

タグは100以上に増える想定

管理画面はカテゴリ分け（二層構造）で整理予定

別途、複数評価軸（story / art など）も導入検討中

懸念点：

タグと評価軸が混ざると概念が崩壊する可能性がある

✅ 結論：役割を明確に分離する
🏷 タグ = 「属性・内容」

例：

ジャンル

雰囲気

キャラ属性

シチュエーション

技術要素

特徴：

複数付与可能

定性的

フィルタ用途

カテゴリ配下に整理

⭐ 評価軸 = 「数値化された主観的評価」

例：

overall（必須）

story

art

direction

特徴：

数値（0.5刻み）

任意入力

分析・抽出用途

カテゴリ管理とは別系統

🚫 やってはいけない設計

「作画◎」をタグにする

「ストーリー重視」をタグにする

評価軸をタグカテゴリの一種として扱う

これをやると：

数値検索が不可能になる

データの意味が曖昧になる

UIが複雑化する

🏗 推奨アーキテクチャ分離
1. タグ系
tag_categories

| id | name | order |

tags

| id | name | category_id |

file_tags

| file_id | tag_id |

2. 評価系
rating_axes

| id | profile_id | key | label | order |

file_ratings

| file_id | axis_id | value |

物理的にもテーブルを分離する。

🖥 UIの分離
タグ管理画面

カテゴリ左

タグ右

完全にタグ専用

評価軸管理画面（別画面）

軸追加 / 削除

表示順変更

プロファイル紐付け

ファイル詳細画面
[タグセクション]
  ジャンル: ○○
  雰囲気: △△

[評価セクション]
  ⭐ 総合: 3.5
  ▶ 詳細評価


セクションを完全分離。

🎯 設計上の最大メリット

概念が崩れない

将来分析機能が追加可能

UIがシンプルになる

データ構造が明確

🔥 将来的な発展

この分離ができていれば：

「story >= 4 かつ ジャンル=ミステリー」

「overall 4以上の中で 雰囲気=ダーク」

のような複合検索が自然に実装可能。

📌 最終整理
項目	タグ	評価軸
性質	定性的	数値
目的	属性分類	主観評価
複数付与	可	軸ごとに1値
管理	カテゴリ配下	軸マスタ管理
依頼事項

タグ管理と評価軸管理を物理的・UI的に分離する設計案提示

既存タグ構造との整合性確認

マイグレーション設計

検索クエリ設計方針

これで概念混線は防げます。

もし次に詰めるなら、

「タグカテゴリはプロファイル共有か分離か」

「評価軸はプロファイル単位かグローバルか」

この2点がアーキテクチャ的に重要です。

ごめん今の３つのまとめをmd形式で出してくれないかな、投げるだけでなくメモとして残しておきたい

もちろん。
これまでの 3つの整理（①複数評価軸設計 / ②タグ管理画面構造 / ③タグと評価軸の棲み分け） を、
そのまま保存できる Markdown 形式でまとめます。

タグ管理・評価軸設計 総合メモ
① 複数評価軸の導入方針
🎯 前提

将来的にファイル数は1000件以上を想定

⭐5は全体の10%未満（厳選評価）

総合評価と個別評価が乖離するケースがある
（例：総合3だがストーリーは5）

目的：

記憶として残す

数値検索に使える

入力負荷で破綻しない

✅ 基本方針
1. 総合評価（overall）は必須

0.5刻み

一覧ではこれのみ表示

2. 複数評価軸は任意入力

例：

story

art

direction

※ 最大3〜4軸まで

3. 固定カラム方式は採用しない
❌ NG
overall: number
story: number
art: number


軸追加時にDB変更が必要。

✅ 推奨：動的評価軸方式
rating_axes

| id | profile_id | key | label | order |

file_ratings

| file_id | axis_id | value |

メリット：

軸追加がスキーマ変更不要

プロファイル単位で変更可能

UIを動的生成可能

将来の分析機能に拡張可能

🖥 UI設計
一覧画面

⭐ overall のみ表示

詳細画面
⭐ 総合: 3.5

▶ 詳細評価（折りたたみ）
  ストーリー: ★★★★★
  作画: ★★☆☆☆

🔎 検索要件

overall >= 4

story >= 4.5

などの詳細検索を可能にする。

🚫 避けるべき構成

10軸以上

全軸必須

一覧に全軸表示

タグとの混在

② タグ管理画面の構造設計
🎯 背景

タグは100〜300以上になる想定

現状はフラット構造で管理困難

フォルダ型構造に整理したい

✅ 基本構造：二層モデル
カテゴリ
 └ タグ
 └ タグ


※ 階層は2段まで

🏗 データ構造
tag_categories

| id | name | order |

tags

| id | name | category_id | order |

file_tags

| file_id | tag_id |

🖥 UI構造案
パターンA：左右ペイン

左：カテゴリ一覧

右：カテゴリ内タグ一覧

パターンB：アコーディオン
▶ 評価系（12）
▶ 内容系（35）
▶ 技術系（18）

🔥 将来拡張

カテゴリ色設定

折りたたみ状態保存

並び替え可能

未分類カテゴリを用意

🚫 避ける構成

3階層以上の多段ネスト

カテゴリ未設定タグ大量発生

無限スクロールのみ管理

③ タグと評価軸の棲み分け
🎯 重要原則

タグと評価軸は物理的・概念的に分離する

🏷 タグ = 属性・内容

ジャンル

雰囲気

シチュエーション

技術要素

特徴：

複数付与可

定性的

カテゴリ配下管理

⭐ 評価軸 = 数値評価

overall

story

art

特徴：

数値（0.5刻み）

軸ごとに1値

分析・抽出用途

🚫 NG例

「作画◎」をタグにする

「ストーリー重視」をタグ化する

評価軸をタグカテゴリ扱いする

🏗 分離アーキテクチャ
タグ系

tag_categories

tags

file_tags

評価系

rating_axes

file_ratings

🖥 UI分離
ファイル詳細画面
[タグセクション]
  ジャンル: ○○
  雰囲気: △△

[評価セクション]
  ⭐ 総合: 3.5
  ▶ 詳細評価


完全に別セクションとして表示。

📌 全体設計の狙い

タグ100〜300でも破綻しない

概念混線を防ぐ

将来の拡張・分析に対応可能

入力負荷を最小化

今後検討すべき論点

タグカテゴリはプロファイル共有か分離か

評価軸はプロファイル単位かグローバルか

既存データのマイグレーション方法

詳細検索UIの設計